{"ast":null,"code":"// src/api.js\nconst API_BASE = \"http://127.0.0.1:5002\";\n\n// ---------- helpers ----------\nexport const toNum = v => isNaN(+v) ? 0 : +v;\nexport const amt = (q, r) => toNum(q) * toNum(r);\nexport const inr = v => toNum(v).toLocaleString(\"en-IN\", {\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2\n});\nasync function getJSON(url) {\n  const r = await fetch(url);\n  if (!r.ok) throw new Error(await r.text());\n  return r.json();\n}\nasync function postJSON(url, body) {\n  const r = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(body)\n  });\n  if (!r.ok) throw new Error(await r.text());\n  return r.json();\n}\nfunction normalizeAccountRow(a) {\n  var _ref, _ref2, _a$account_id, _ref3, _a$account_name;\n  if (!a) return a;\n  return {\n    ...a,\n    account_id: (_ref = (_ref2 = (_a$account_id = a.account_id) !== null && _a$account_id !== void 0 ? _a$account_id : a.id) !== null && _ref2 !== void 0 ? _ref2 : a.accountId) !== null && _ref !== void 0 ? _ref : null,\n    account_name: (_ref3 = (_a$account_name = a.account_name) !== null && _a$account_name !== void 0 ? _a$account_name : a.name) !== null && _ref3 !== void 0 ? _ref3 : \"\"\n  };\n}\n\n// ================== Items / Inventory (MySQL) ==================\nexport async function apiGetInventory() {\n  return getJSON(`${API_BASE}/inventory`);\n}\n\n// Add item in MySQL items table\nexport async function apiAddItem(name, hsnCode, groupName) {\n  const res = await fetch(`${API_BASE}/inventory/add_item`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      name,\n      hsn_code: hsnCode,\n      group: groupName\n    })\n  });\n  if (!res.ok) throw new Error(\"Failed to add item\");\n  return await res.json();\n}\n\n// Suggestions from items table\nexport async function apiSuggestNames(q = \"\", limit = 20) {\n  const url = new URL(`${API_BASE}/purchases/suggest`);\n  if (q) url.searchParams.set(\"q\", q);\n  url.searchParams.set(\"limit\", String(limit));\n  return getJSON(url.toString()); // [{name,gst,hsn,unit,price}]\n}\n\n// Availability check from MySQL\nexport async function apiCheckAvailability(name, qty = 0) {\n  const url = new URL(`${API_BASE}/inventory/availability`);\n  url.searchParams.set(\"name\", name || \"\");\n  url.searchParams.set(\"qty\", String(qty || 0));\n  const res = await getJSON(`${API_BASE}/inventory/availability?name=${encodeURIComponent(name)}&qty=${qty}`);\n  console.log(\"availability response:\", res);\n  return getJSON(url.toString()); // {exists,stock,can_deliver}\n}\n\n// ================== Purchases (MySQL) ==================\n/*\r\nexport async function apiAddPurchase({\r\n  item_name,\r\n  qty,\r\n  gst,\r\n  price,\r\n  date,\r\n  bill_no,\r\n}) {\r\n  return postJSON(`${API_BASE}/inventory/add_purchase`, {\r\n    item_name,\r\n    qty: Number(qty || 0),\r\n    gst: Number(gst || 0),\r\n    price: Number(price || 0),\r\n    date,\r\n    bill_no,\r\n  });\r\n}*/\n/*\r\nexport async function apiAddPurchase({\r\n  item_name,\r\n  qty,\r\n  purchase_state,\r\n  purchase_price,\r\n  gst_percent,     // selling GST\r\n  selling_price,   // selling price\r\n  date,\r\n  bill_no,\r\n}) {\r\n  return postJSON(`${API_BASE}/inventory/add_purchase`, {\r\n    item_name,\r\n    qty: Number(qty || 0),\r\n\r\n    // âœ… new fields\r\n    purchase_state: (purchase_state || \"\").trim() || null,\r\n    purchase_price:\r\n      purchase_price === \"\" || purchase_price == null\r\n        ? null\r\n        : Number(purchase_price),\r\n\r\n    // âœ… selling fields\r\n    gst_percent:\r\n      gst_percent === \"\" || gst_percent == null ? null : Number(gst_percent),\r\n    selling_price:\r\n      selling_price === \"\" || selling_price == null ? null : Number(selling_price),\r\n\r\n    date,\r\n    bill_no,\r\n  });\r\n}\r\n*/\nexport async function apiAddPurchase({\n  item_name,\n  qty,\n  purchase_state,\n  purchase_price,\n  gst_percent,\n  // selling GST\n  selling_price,\n  // selling price\n  date,\n  bill_no,\n  party_name // âœ… NEW\n}) {\n  return postJSON(`${API_BASE}/inventory/add_purchase`, {\n    item_name,\n    qty: Number(qty || 0),\n    // âœ… NEW fields\n    purchase_state: (purchase_state || \"\").trim() || null,\n    purchase_price: purchase_price === \"\" || purchase_price == null ? null : Number(purchase_price),\n    // âœ… selling fields\n    gst_percent: gst_percent === \"\" || gst_percent == null ? null : Number(gst_percent),\n    selling_price: selling_price === \"\" || selling_price == null ? null : Number(selling_price),\n    // âœ… purchase context\n    date,\n    bill_no,\n    party_name: (party_name || \"\").trim() || null // âœ… NEW\n  });\n}\n\n// Log a sale row into purchases as negative quantity\nexport async function apiAddSale(p) {\n  return apiAddPurchase({\n    item_name: p.item_name,\n    qty: -Math.abs(Number(p.qty || 0)),\n    gst: Number(p.gst || 0),\n    price: Number(p.price || 0),\n    date: p.date,\n    bill_no: p.bill_no\n  });\n}\n\n// Push many billing lines into purchases with negative qty.\nexport async function apiAddSaleLines(lines = [], meta = {}) {\n  const {\n    date,\n    bill_no\n  } = meta;\n  const norm = l => {\n    var _ref4, _ref5, _l$itemName, _ref6, _l$qty, _ref7, _ref8, _l$gst, _ref9, _ref10, _l$unitPrice;\n    const item_name = (_ref4 = (_ref5 = (_l$itemName = l.itemName) !== null && _l$itemName !== void 0 ? _l$itemName : l[\"ITEM NAME\"]) !== null && _ref5 !== void 0 ? _ref5 : l.name) !== null && _ref4 !== void 0 ? _ref4 : \"\";\n    const qty = toNum((_ref6 = (_l$qty = l.qty) !== null && _l$qty !== void 0 ? _l$qty : l.QTY) !== null && _ref6 !== void 0 ? _ref6 : 0);\n    const gst = toNum((_ref7 = (_ref8 = (_l$gst = l.gst) !== null && _l$gst !== void 0 ? _l$gst : l.gstRate) !== null && _ref8 !== void 0 ? _ref8 : l[\"GST %\"]) !== null && _ref7 !== void 0 ? _ref7 : 0);\n    const price = toNum((_ref9 = (_ref10 = (_l$unitPrice = l.unitPrice) !== null && _l$unitPrice !== void 0 ? _l$unitPrice : l.price) !== null && _ref10 !== void 0 ? _ref10 : l[\"PRICE\"]) !== null && _ref9 !== void 0 ? _ref9 : 0);\n    return {\n      item_name,\n      qty,\n      gst,\n      price,\n      date,\n      bill_no\n    };\n  };\n  for (const line of lines || []) {\n    const row = norm(line);\n    if (!row.item_name || !row.qty) continue;\n    await apiAddSale(row);\n  }\n}\n\n// Purchases-based name suggest (for billing)\n/*export async function apiBillingSuggest(q, limit = 25) {\r\n  const url = new URL(`${API_BASE}/inventory/suggest`);\r\n  url.searchParams.set(\"q\", q || \"\");\r\n  url.searchParams.set(\"limit\", String(limit));\r\n  return getJSON(url.toString()); // [{name,hsn,gst,price}]\r\n}*/\n\n// Purchases-based name suggest (for billing)\nexport async function apiBillingSuggest(q) {\n  const url = new URL(`${API_BASE}/purchases/suggest`);\n  url.searchParams.set(\"q\", q || \"\");\n  // url.searchParams.set(\"limit\", String(limit));\n  return getJSON(url.toString());\n}\nexport async function apiPurchasesLast(name) {\n  const url = new URL(`${API_BASE}/purchases/last`);\n  url.searchParams.set(\"name\", name || \"\");\n  return getJSON(url.toString()); // {name,hsn,gst,price,stockQty}\n}\nexport async function apiCreateSaleFIFO(payload) {\n  const url = `${API_BASE}/sales/create_fifo`;\n  const body = JSON.stringify(payload);\n\n  // âœ… Logs (Developer Console)\n  console.group(\"ðŸŸ¦ apiCreateSaleFIFO â†’ POST /sales/create_fifo\");\n  console.log(\"URL:\", url);\n  console.log(\"Payload (object):\", payload);\n  console.log(\"Payload (JSON pretty):\\n\", JSON.stringify(payload, null, 2));\n  console.log(\"Body length:\", body.length);\n  console.groupEnd();\n\n  // âœ… Optional: pause execution to inspect in console\n  // debugger;\n\n  const res = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body\n  });\n\n  // âœ… Also log server response (helpful for debugging 400)\n  const text = await res.text();\n  console.log(\"â¬…ï¸ Response status:\", res.status);\n  console.log(\"â¬…ï¸ Response body:\", text);\n  if (!res.ok) {\n    let err = {};\n    try {\n      err = JSON.parse(text);\n    } catch {}\n    throw new Error(err.detail || text || \"Failed to create sale\");\n  }\n\n  // parse success JSON\n  try {\n    return JSON.parse(text);\n  } catch {\n    return {\n      ok: true,\n      raw: text\n    };\n  }\n}\n\n// ================== Accounts (MySQL) ==================\nexport async function apiAccountsList(q = \"\", limit = 100) {\n  const url = new URL(`${API_BASE}/accounts`);\n  if (q) url.searchParams.set(\"q\", q);\n  url.searchParams.set(\"limit\", String(limit));\n  return getJSON(url.toString());\n}\nexport async function apiAccountsUpsert(payload) {\n  return postJSON(`${API_BASE}/accounts/upsert`, payload);\n}\nexport async function apiItemsSearch(q = \"\") {\n  const qs = q ? `?q=${encodeURIComponent(q)}` : \"\";\n  return getJSON(`${API_BASE}/items_pk_steel${qs}`);\n}\nexport async function apiItemsGetOne(id) {\n  return getJSON(`${API_BASE}/items_pk_steel/${id}`);\n}\nexport async function apiItemsUpsert(payload) {\n  return postJSON(`${API_BASE}/items_pk_steel/upsert`, payload);\n}\nexport async function apiItemsDelete(id) {\n  const r = await fetch(`${API_BASE}/items_pk_steel/${id}`, {\n    method: \"DELETE\"\n  });\n  if (!r.ok) throw new Error(await r.text());\n  return r.json();\n}\n\n// ================== Stocks ==================\nexport async function apiGetStocks({\n  q = \"\",\n  limit = 200,\n  offset = 0\n} = {}) {\n  const qs = new URLSearchParams({\n    q,\n    limit: String(limit),\n    offset: String(offset)\n  });\n  return getJSON(`${API_BASE}/stocks?${qs.toString()}`);\n}\nexport async function apiSuggestStock(q) {\n  const qs = new URLSearchParams({\n    q: q || \"\",\n    limit: \"12\"\n  });\n  return getJSON(`${API_BASE}/stocks/suggest?${qs.toString()}`);\n}\nexport async function apiImportStockExcel(file) {\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const r = await fetch(`${API_BASE}/stocks/import_excel`, {\n    method: \"POST\",\n    body: fd\n  });\n  if (!r.ok) throw new Error(await r.text());\n  return r.json();\n}\nexport async function apiAccountsSuggest(q, limit = 10) {\n  const r = await fetch(`${API_BASE}/accounts/suggest?q=${encodeURIComponent(q)}&limit=${limit}`);\n  if (!r.ok) throw new Error(await r.text());\n  const rows = await r.json();\n  return (rows || []).map(normalizeAccountRow);\n}\nexport async function apiAccountByMobile(mobile) {\n  const r = await fetch(`${API_BASE}/accounts/by_mobile?mobile=${encodeURIComponent(mobile)}`);\n  if (!r.ok) throw new Error(await r.text());\n  const row = await r.json();\n  return normalizeAccountRow(row);\n}\nexport async function apiAccountsSuggestName(q, limit = 10) {\n  const r = await fetch(`${API_BASE}/accounts/suggest_name?q=${encodeURIComponent(q)}&limit=${limit}`);\n  if (!r.ok) throw new Error(await r.text());\n  const rows = await r.json();\n  return (rows || []).map(normalizeAccountRow);\n}\nexport async function apiAccountByName(name) {\n  const r = await fetch(`${API_BASE}/accounts/by_name?name=${encodeURIComponent(name)}`);\n  if (!r.ok) throw new Error(await r.text());\n  return r.json();\n}\n\n/*\r\nexport async function apiCreateSaleFIFO(payload) {\r\n  const res = await fetch(`${API_BASE}/sales/create_fifo`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(() => ({}));\r\n    throw new Error(err.detail || \"Failed to create sale\");\r\n  }\r\n\r\n  return res.json();\r\n}\r\n*/\n\nexport async function apiAccountById(account_id) {\n  const r = await fetch(`${API_BASE}/accounts/by_id?account_id=${account_id}`);\n  if (!r.ok) throw new Error(await r.text());\n  return normalizeAccountRow(await r.json());\n}","map":{"version":3,"names":["API_BASE","toNum","v","isNaN","amt","q","r","inr","toLocaleString","minimumFractionDigits","maximumFractionDigits","getJSON","url","fetch","ok","Error","text","json","postJSON","body","method","headers","JSON","stringify","normalizeAccountRow","a","_ref","_ref2","_a$account_id","_ref3","_a$account_name","account_id","id","accountId","account_name","name","apiGetInventory","apiAddItem","hsnCode","groupName","res","hsn_code","group","apiSuggestNames","limit","URL","searchParams","set","String","toString","apiCheckAvailability","qty","encodeURIComponent","console","log","apiAddPurchase","item_name","purchase_state","purchase_price","gst_percent","selling_price","date","bill_no","party_name","Number","trim","apiAddSale","p","Math","abs","gst","price","apiAddSaleLines","lines","meta","norm","l","_ref4","_ref5","_l$itemName","_ref6","_l$qty","_ref7","_ref8","_l$gst","_ref9","_ref10","_l$unitPrice","itemName","QTY","gstRate","unitPrice","line","row","apiBillingSuggest","apiPurchasesLast","apiCreateSaleFIFO","payload","length","groupEnd","status","err","parse","detail","raw","apiAccountsList","apiAccountsUpsert","apiItemsSearch","qs","apiItemsGetOne","apiItemsUpsert","apiItemsDelete","apiGetStocks","offset","URLSearchParams","apiSuggestStock","apiImportStockExcel","file","fd","FormData","append","apiAccountsSuggest","rows","map","apiAccountByMobile","mobile","apiAccountsSuggestName","apiAccountByName","apiAccountById"],"sources":["C:/CA/Billing/dev/billing-pks/src/api.jsx"],"sourcesContent":["// src/api.js\r\nconst API_BASE = \"http://127.0.0.1:5002\";\r\n\r\n// ---------- helpers ----------\r\nexport const toNum = (v) => (isNaN(+v) ? 0 : +v);\r\nexport const amt = (q, r) => toNum(q) * toNum(r);\r\nexport const inr = (v) =>\r\n  toNum(v).toLocaleString(\"en-IN\", {\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  });\r\n\r\nasync function getJSON(url) {\r\n  const r = await fetch(url);\r\n  if (!r.ok) throw new Error(await r.text());\r\n  return r.json();\r\n}\r\n\r\nasync function postJSON(url, body) {\r\n  const r = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(body),\r\n  });\r\n  if (!r.ok) throw new Error(await r.text());\r\n  return r.json();\r\n}\r\n\r\nfunction normalizeAccountRow(a) {\r\n  if (!a) return a;\r\n  return {\r\n    ...a,\r\n    account_id: a.account_id ?? a.id ?? a.accountId ?? null,\r\n    account_name: a.account_name ?? a.name ?? \"\",\r\n  };\r\n}\r\n\r\n// ================== Items / Inventory (MySQL) ==================\r\nexport async function apiGetInventory() {\r\n  return getJSON(`${API_BASE}/inventory`);\r\n}\r\n\r\n// Add item in MySQL items table\r\nexport async function apiAddItem(name, hsnCode, groupName) {\r\n  const res = await fetch(`${API_BASE}/inventory/add_item`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      name,\r\n      hsn_code: hsnCode,\r\n      group: groupName,\r\n    }),\r\n  });\r\n  if (!res.ok) throw new Error(\"Failed to add item\");\r\n  return await res.json();\r\n}\r\n\r\n\r\n// Suggestions from items table\r\nexport async function apiSuggestNames(q = \"\", limit = 20) {\r\n  const url = new URL(`${API_BASE}/purchases/suggest`);\r\n  if (q) url.searchParams.set(\"q\", q);\r\n  url.searchParams.set(\"limit\", String(limit));\r\n  return getJSON(url.toString()); // [{name,gst,hsn,unit,price}]\r\n}\r\n\r\n// Availability check from MySQL\r\nexport async function apiCheckAvailability(name, qty = 0) {\r\n  const url = new URL(`${API_BASE}/inventory/availability`);\r\n  url.searchParams.set(\"name\", name || \"\");\r\n  url.searchParams.set(\"qty\", String(qty || 0));\r\n  const res = await getJSON(`${API_BASE}/inventory/availability?name=${encodeURIComponent(name)}&qty=${qty}`);\r\n  console.log(\"availability response:\", res);\r\n  return getJSON(url.toString()); // {exists,stock,can_deliver}\r\n}\r\n\r\n// ================== Purchases (MySQL) ==================\r\n/*\r\nexport async function apiAddPurchase({\r\n  item_name,\r\n  qty,\r\n  gst,\r\n  price,\r\n  date,\r\n  bill_no,\r\n}) {\r\n  return postJSON(`${API_BASE}/inventory/add_purchase`, {\r\n    item_name,\r\n    qty: Number(qty || 0),\r\n    gst: Number(gst || 0),\r\n    price: Number(price || 0),\r\n    date,\r\n    bill_no,\r\n  });\r\n}*/\r\n/*\r\nexport async function apiAddPurchase({\r\n  item_name,\r\n  qty,\r\n  purchase_state,\r\n  purchase_price,\r\n  gst_percent,     // selling GST\r\n  selling_price,   // selling price\r\n  date,\r\n  bill_no,\r\n}) {\r\n  return postJSON(`${API_BASE}/inventory/add_purchase`, {\r\n    item_name,\r\n    qty: Number(qty || 0),\r\n\r\n    // âœ… new fields\r\n    purchase_state: (purchase_state || \"\").trim() || null,\r\n    purchase_price:\r\n      purchase_price === \"\" || purchase_price == null\r\n        ? null\r\n        : Number(purchase_price),\r\n\r\n    // âœ… selling fields\r\n    gst_percent:\r\n      gst_percent === \"\" || gst_percent == null ? null : Number(gst_percent),\r\n    selling_price:\r\n      selling_price === \"\" || selling_price == null ? null : Number(selling_price),\r\n\r\n    date,\r\n    bill_no,\r\n  });\r\n}\r\n*/\r\nexport async function apiAddPurchase({\r\n  item_name,\r\n  qty,\r\n  purchase_state,\r\n  purchase_price,\r\n  gst_percent,     // selling GST\r\n  selling_price,   // selling price\r\n  date,\r\n  bill_no,\r\n  party_name,      // âœ… NEW\r\n}) {\r\n  return postJSON(`${API_BASE}/inventory/add_purchase`, {\r\n    item_name,\r\n    qty: Number(qty || 0),\r\n\r\n    // âœ… NEW fields\r\n    purchase_state: (purchase_state || \"\").trim() || null,\r\n    purchase_price:\r\n      purchase_price === \"\" || purchase_price == null\r\n        ? null\r\n        : Number(purchase_price),\r\n\r\n    // âœ… selling fields\r\n    gst_percent:\r\n      gst_percent === \"\" || gst_percent == null ? null : Number(gst_percent),\r\n    selling_price:\r\n      selling_price === \"\" || selling_price == null\r\n        ? null\r\n        : Number(selling_price),\r\n\r\n    // âœ… purchase context\r\n    date,\r\n    bill_no,\r\n    party_name: (party_name || \"\").trim() || null,  // âœ… NEW\r\n  });\r\n}\r\n\r\n\r\n// Log a sale row into purchases as negative quantity\r\nexport async function apiAddSale(p) {\r\n  return apiAddPurchase({\r\n    item_name: p.item_name,\r\n    qty: -Math.abs(Number(p.qty || 0)),\r\n    gst: Number(p.gst || 0),\r\n    price: Number(p.price || 0),\r\n    date: p.date,\r\n    bill_no: p.bill_no,\r\n  });\r\n}\r\n\r\n// Push many billing lines into purchases with negative qty.\r\nexport async function apiAddSaleLines(lines = [], meta = {}) {\r\n  const { date, bill_no } = meta;\r\n  const norm = (l) => {\r\n    const item_name = l.itemName ?? l[\"ITEM NAME\"] ?? l.name ?? \"\";\r\n    const qty = toNum(l.qty ?? l.QTY ?? 0);\r\n    const gst = toNum(l.gst ?? l.gstRate ?? l[\"GST %\"] ?? 0);\r\n    const price = toNum(l.unitPrice ?? l.price ?? l[\"PRICE\"] ?? 0);\r\n    return { item_name, qty, gst, price, date, bill_no };\r\n  };\r\n  for (const line of lines || []) {\r\n    const row = norm(line);\r\n    if (!row.item_name || !row.qty) continue;\r\n    await apiAddSale(row);\r\n  }\r\n}\r\n\r\n// Purchases-based name suggest (for billing)\r\n/*export async function apiBillingSuggest(q, limit = 25) {\r\n  const url = new URL(`${API_BASE}/inventory/suggest`);\r\n  url.searchParams.set(\"q\", q || \"\");\r\n  url.searchParams.set(\"limit\", String(limit));\r\n  return getJSON(url.toString()); // [{name,hsn,gst,price}]\r\n}*/\r\n\r\n// Purchases-based name suggest (for billing)\r\nexport async function apiBillingSuggest(q) {\r\n  const url = new URL(`${API_BASE}/purchases/suggest`);\r\n  url.searchParams.set(\"q\", q || \"\");\r\n // url.searchParams.set(\"limit\", String(limit));\r\n  return getJSON(url.toString()); \r\n}\r\n\r\nexport async function apiPurchasesLast(name) {\r\n  const url = new URL(`${API_BASE}/purchases/last`);\r\n  url.searchParams.set(\"name\", name || \"\");\r\n  return getJSON(url.toString()); // {name,hsn,gst,price,stockQty}\r\n}\r\n\r\nexport async function apiCreateSaleFIFO(payload) {\r\n  const url = `${API_BASE}/sales/create_fifo`;\r\n  const body = JSON.stringify(payload);\r\n\r\n  // âœ… Logs (Developer Console)\r\n  console.group(\"ðŸŸ¦ apiCreateSaleFIFO â†’ POST /sales/create_fifo\");\r\n  console.log(\"URL:\", url);\r\n  console.log(\"Payload (object):\", payload);\r\n  console.log(\"Payload (JSON pretty):\\n\", JSON.stringify(payload, null, 2));\r\n  console.log(\"Body length:\", body.length);\r\n  console.groupEnd();\r\n\r\n  // âœ… Optional: pause execution to inspect in console\r\n  // debugger;\r\n\r\n  const res = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body,\r\n  });\r\n\r\n  // âœ… Also log server response (helpful for debugging 400)\r\n  const text = await res.text();\r\n  console.log(\"â¬…ï¸ Response status:\", res.status);\r\n  console.log(\"â¬…ï¸ Response body:\", text);\r\n\r\n  if (!res.ok) {\r\n    let err = {};\r\n    try {\r\n      err = JSON.parse(text);\r\n    } catch {}\r\n    throw new Error(err.detail || text || \"Failed to create sale\");\r\n  }\r\n\r\n  // parse success JSON\r\n  try {\r\n    return JSON.parse(text);\r\n  } catch {\r\n    return { ok: true, raw: text };\r\n  }\r\n}\r\n\r\n// ================== Accounts (MySQL) ==================\r\nexport async function apiAccountsList(q = \"\", limit = 100) {\r\n  const url = new URL(`${API_BASE}/accounts`);\r\n  if (q) url.searchParams.set(\"q\", q);\r\n  url.searchParams.set(\"limit\", String(limit));\r\n  return getJSON(url.toString());\r\n}\r\n\r\nexport async function apiAccountsUpsert(payload) {\r\n  return postJSON(`${API_BASE}/accounts/upsert`, payload);\r\n}\r\n\r\nexport async function apiItemsSearch(q = \"\") {\r\n  const qs = q ? `?q=${encodeURIComponent(q)}` : \"\";\r\n  return getJSON(`${API_BASE}/items_pk_steel${qs}`);\r\n}\r\n\r\nexport async function apiItemsGetOne(id) {\r\n  return getJSON(`${API_BASE}/items_pk_steel/${id}`);\r\n}\r\n\r\nexport async function apiItemsUpsert(payload) {\r\n  return postJSON(`${API_BASE}/items_pk_steel/upsert`, payload);\r\n}\r\n\r\nexport async function apiItemsDelete(id) {\r\n  const r = await fetch(`${API_BASE}/items_pk_steel/${id}`, { method: \"DELETE\" });\r\n  if (!r.ok) throw new Error(await r.text());\r\n  return r.json();\r\n}\r\n\r\n// ================== Stocks ==================\r\nexport async function apiGetStocks({ q = \"\", limit = 200, offset = 0 } = {}) {\r\n  const qs = new URLSearchParams({ q, limit: String(limit), offset: String(offset) });\r\n  return getJSON(`${API_BASE}/stocks?${qs.toString()}`);\r\n}\r\n\r\nexport async function apiSuggestStock(q) {\r\n  const qs = new URLSearchParams({ q: q || \"\", limit: \"12\" });\r\n  return getJSON(`${API_BASE}/stocks/suggest?${qs.toString()}`);\r\n}\r\n\r\nexport async function apiImportStockExcel(file) {\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n\r\n  const r = await fetch(`${API_BASE}/stocks/import_excel`, {\r\n    method: \"POST\",\r\n    body: fd,\r\n  });\r\n  if (!r.ok) throw new Error(await r.text());\r\n  return r.json();\r\n}\r\n\r\nexport async function apiAccountsSuggest(q, limit = 10) {\r\n  const r = await fetch(\r\n    `${API_BASE}/accounts/suggest?q=${encodeURIComponent(q)}&limit=${limit}`\r\n  );\r\n  if (!r.ok) throw new Error(await r.text());\r\n  const rows = await r.json();\r\n  return (rows || []).map(normalizeAccountRow);\r\n}\r\n\r\n\r\nexport async function apiAccountByMobile(mobile) {\r\n  const r = await fetch(\r\n    `${API_BASE}/accounts/by_mobile?mobile=${encodeURIComponent(mobile)}`\r\n  );\r\n  if (!r.ok) throw new Error(await r.text());\r\n  const row = await r.json();\r\n  return normalizeAccountRow(row);\r\n}\r\n\r\nexport async function apiAccountsSuggestName(q, limit = 10) {\r\n  const r = await fetch(\r\n    `${API_BASE}/accounts/suggest_name?q=${encodeURIComponent(q)}&limit=${limit}`\r\n  );\r\n  if (!r.ok) throw new Error(await r.text());\r\n  const rows = await r.json();\r\n  return (rows || []).map(normalizeAccountRow);\r\n}\r\n\r\nexport async function apiAccountByName(name) {\r\n  const r = await fetch(\r\n    `${API_BASE}/accounts/by_name?name=${encodeURIComponent(name)}`\r\n  );\r\n  if (!r.ok) throw new Error(await r.text());\r\n  return r.json();\r\n}\r\n\r\n\r\n\r\n/*\r\nexport async function apiCreateSaleFIFO(payload) {\r\n  const res = await fetch(`${API_BASE}/sales/create_fifo`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(() => ({}));\r\n    throw new Error(err.detail || \"Failed to create sale\");\r\n  }\r\n\r\n  return res.json();\r\n}\r\n*/\r\n\r\nexport async function apiAccountById(account_id) {\r\n  const r = await fetch(\r\n    `${API_BASE}/accounts/by_id?account_id=${account_id}`\r\n  );\r\n  if (!r.ok) throw new Error(await r.text());\r\n  return normalizeAccountRow(await r.json());\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}