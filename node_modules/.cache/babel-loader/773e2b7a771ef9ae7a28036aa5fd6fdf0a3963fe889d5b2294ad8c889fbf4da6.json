{"ast":null,"code":"import _objectSpread from\"C:/CA/Billing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/InventoryPanel.jsx\nimport React,{useEffect,useRef,useState}from\"react\";import{apiGetInventory,apiSuggestNames,apiAddItem,apiAddPurchase}from\"./api\";import\"./InventoryPanel.css\";// Format number as Indian currency (for display only)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const toINR=n=>Number(n||0).toLocaleString(\"en-IN\",{maximumFractionDigits:2});export default function InventoryPanel(){// ==============================\n// 0. TAB STATE\n// ==============================\nconst[activeTab,setActiveTab]=useState(\"purchase\");// \"purchase\" | \"item\"\n// ==============================\n// 1. INVENTORY GRID (items table)\n// ==============================\nconst[rows,setRows]=useState([]);// ==============================\n// 2. ADD ITEM FORM (items table)\n// ==============================\nconst[name,setName]=useState(\"\");const[groupName,setGroupName]=useState(\"\");const[hsnCode,setHsnCode]=useState(\"\");const[suggest,setSuggest]=useState([]);const debRef=useRef();// ==============================\n// 3. PURCHASE CONTEXT\n// ==============================\nconst[pDate,setPDate]=useState(()=>new Date().toISOString().slice(0,10));const[pBill,setPBill]=useState(\"\");const[pParty,setPParty]=useState(\"\");// Party Name\nconst[pGstNo,setPGstNo]=useState(\"\");// GST Number (GSTIN)\nconst[pGst,setPGst]=useState(\"\");// GST Number (GSTIN)\n// ==============================\n// 4. PURCHASE LINES\n// ==============================\nconst makeEmptyLine=()=>({item:\"\",qty:\"\",purchase_state:\"\",purchase_price:\"\",purchase_discount:\"\",// ✅ NEW: discount amount\ngst:pGst||\"18\",// selling GST\nprice:\"\"// selling price\n});const[lines,setLines]=useState([makeEmptyLine()]);const[pSuggest,setPSuggest]=useState([]);const pDebRef=useRef();// ------------------------------\n// Initial load of inventory from DB\n// ------------------------------\nuseEffect(()=>{apiGetInventory().then(setRows).catch(()=>{});},[]);// ------------------------------\n// Keep new line GST in sync with context GST\n// (only updates the trailing empty line's GST)\n// ------------------------------\nuseEffect(()=>{setLines(prev=>{if(!prev.length)return[makeEmptyLine()];const next=[...prev];const lastIdx=next.length-1;const last=next[lastIdx]||{};const isLastFilled=(last.item||\"\").trim()!==\"\"||(last.qty||\"\")!==\"\"||(last.purchase_state||\"\")!==\"\"||(last.purchase_price||\"\")!==\"\"||(last.purchase_discount||\"\")!==\"\"||(last.gst||\"\")!==\"\"||(last.price||\"\")!==\"\";if(!isLastFilled){next[lastIdx]=_objectSpread(_objectSpread({},last),{},{gst:pGst||\"18\"});}return next;});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[pGst]);// ------------------------------\n// Suggestions for \"Add Item\"\n// ------------------------------\nuseEffect(()=>{clearTimeout(debRef.current);debRef.current=setTimeout(async()=>{if(!name){setSuggest([]);return;}try{setSuggest(await apiSuggestNames(name,25));}catch(_unused){// ignore\n}},180);return()=>clearTimeout(debRef.current);},[name]);// ------------------------------\n// Suggestions for purchase lines\n// ------------------------------\nconst fetchItemSuggestions=q=>{clearTimeout(pDebRef.current);pDebRef.current=setTimeout(async()=>{if(!q){setPSuggest([]);return;}try{setPSuggest(await apiSuggestNames(q,25));}catch(_unused2){// ignore\n}},180);};// ------------------------------\n// Add new item (with Group + HSN)\n// ------------------------------\nconst addItem=async()=>{const n=(name||\"\").trim();const g=(groupName||\"\").trim();const h=(hsnCode||\"\").trim();if(!n)return alert(\"Enter item name\");if(!g)return alert(\"Enter item group\");try{await apiAddItem(n,h,g);const fresh=await apiGetInventory();setRows(fresh);setName(\"\");setGroupName(\"\");setHsnCode(\"\");setSuggest([]);}catch(e){alert(\"Error while adding item:\\n\"+e);}};// ------------------------------\n// Update a field within one purchase line\n// ------------------------------\nconst updateLine=(idx,key,val)=>{setLines(prev=>{const next=[...prev];const row=_objectSpread({},next[idx]);// For numeric-ish fields, allow only digits and dot\nconst numericKeys=[\"qty\",\"purchase_price\",\"purchase_discount\",\"gst\",\"price\"];if(numericKeys.includes(key)){val=String(val).replace(/[^0-9.]/g,\"\");}row[key]=val;next[idx]=row;return next;});if(key===\"item\")fetchItemSuggestions(val);};// ------------------------------\n// Ensure there is always a trailing empty row\n// ------------------------------\nconst ensureTrailingEmptyRow=()=>{setLines(prev=>{const last=prev[prev.length-1]||{};const isLastFilled=(last.item||\"\").trim()!==\"\"||(last.qty||\"\")!==\"\"||(last.purchase_state||\"\")!==\"\"||(last.purchase_price||\"\")!==\"\"||(last.purchase_discount||\"\")!==\"\"||(last.gst||\"\")!==\"\"||(last.price||\"\")!==\"\";return isLastFilled?[...prev,makeEmptyLine()]:prev;});};// ------------------------------\n// Called after purchase_price is entered (blur/Enter)\n// (kept same behavior as your original)\n// ------------------------------\nconst onPurchasePriceDone=idx=>{const r=lines[idx]||{};if((r.item||\"\").trim()&&Number(r.qty)>0){ensureTrailingEmptyRow();setTimeout(()=>{const el=document.getElementById(\"pitem-\".concat(idx+1));el===null||el===void 0?void 0:el.focus();},0);}};// ------------------------------\n// Remove a purchase line row\n// ------------------------------\nconst removeLine=idx=>{setLines(prev=>{const next=prev.filter((_,i)=>i!==idx);return next.length?next:[makeEmptyLine()];});};// ------------------------------\n// Reset purchase context\n// ------------------------------\nconst resetPurchaseContext=()=>{setPDate(new Date().toISOString().slice(0,10));setPBill(\"\");setPParty(\"\");setPGstNo(\"\");};// ------------------------------\n// SUBMIT ALL PURCHASE LINES\n// ------------------------------\nconst submitAllPurchases=async()=>{if(!pBill.trim())return alert(\"Enter Purchase Bill No.\");const payloads=lines.map(l=>{const item_name=(l.item||\"\").trim();const qty=Number(l.qty);// discount amount: stored by reducing purchase_price (no backend change needed)\nconst gross=l.purchase_price===\"\"?null:Number(l.purchase_price);const disc=l.purchase_discount===\"\"?0:Number(l.purchase_discount);const netPurchase=gross===null?null:Math.max(0,(gross||0)-(disc||0));return{item_name,qty,// purchase fields\npurchase_state:(l.purchase_state||\"\").trim()||null,purchase_price:netPurchase,// selling fields\ngst_percent:l.gst===\"\"?null:Number(l.gst),selling_price:l.price===\"\"?null:Number(l.price),// context fields\ndate:pDate,bill_no:pBill,party_name:(pParty||\"\").trim()||null,gst_no:(pGstNo||\"\").trim()||null};}).filter(p=>p.item_name&&Number.isFinite(p.qty)&&p.qty>0);if(!payloads.length)return alert(\"Add at least one valid line.\");try{for(const p of payloads){// eslint-disable-next-line no-await-in-loop\nawait apiAddPurchase(p);}const fresh=await apiGetInventory();setRows(fresh);setLines([makeEmptyLine()]);}catch(e){alert(\"Error while saving purchases:\\n\"+e);}};// ==============================\n// RENDER\n// ==============================\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inv-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:activeTab===\"purchase\"?\"inv-tab active\":\"inv-tab\",onClick:()=>setActiveTab(\"purchase\"),children:\"Add Purchase\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab===\"item\"?\"inv-tab active\":\"inv-tab\",onClick:()=>setActiveTab(\"item\"),children:\"Add Item\"})]}),activeTab===\"purchase\"&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"div\",{className:\"small\",style:{marginBottom:6},children:\"Add Purchase (updates stock & logs in purchases table)\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr 1fr 140px auto\",gap:12,alignItems:\"end\",marginBottom:8},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date of Purchase\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:pDate,onChange:e=>setPDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Purchase Bill No.\"}),/*#__PURE__*/_jsx(\"input\",{value:pBill,onChange:e=>setPBill(e.target.value),placeholder:\"PB/1234\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Party Name\"}),/*#__PURE__*/_jsx(\"input\",{value:pParty,onChange:e=>setPParty(e.target.value),placeholder:\"Supplier / Party name\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"GST No\"}),/*#__PURE__*/_jsx(\"input\",{value:pGstNo,onChange:e=>setPGstNo(e.target.value.toUpperCase()),placeholder:\"33ABCDE1234F1Z5\",maxLength:15})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stack\",style:{alignSelf:\"end\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:resetPurchaseContext,children:\"Reset\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:6},children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:36},children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Item (from items table)\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:110},children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:130},children:\"Purchase State\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:140},children:\"Purchase Price\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:120},children:\"Discount\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:110},children:\"GST %\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:140},children:\"Selling Price\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:60}})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[lines.map((r,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"pitem-\".concat(i),list:\"inv-suggest-purchase\",value:r.item,onChange:e=>updateLine(i,\"item\",e.target.value),placeholder:\"Start typing to search\\u2026\",autoComplete:\"off\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{value:r.qty,onChange:e=>updateLine(i,\"qty\",e.target.value),placeholder:\"0\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{value:r.purchase_state,onChange:e=>updateLine(i,\"purchase_state\",e.target.value.toUpperCase()),placeholder:\"00\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{value:r.purchase_price,onChange:e=>updateLine(i,\"purchase_price\",e.target.value),placeholder:\"0.00\",onBlur:()=>onPurchasePriceDone(i),onKeyDown:e=>{if(e.key===\"Enter\")onPurchasePriceDone(i);}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{value:r.purchase_discount,onChange:e=>updateLine(i,\"purchase_discount\",e.target.value),placeholder:\"0.00\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{value:r.gst,onChange:e=>updateLine(i,\"gst\",e.target.value),placeholder:\"18\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{value:r.price,onChange:e=>updateLine(i,\"price\",e.target.value),placeholder:\"0.00\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>removeLine(i),title:\"Remove row\",children:\"\\u2715\"})})]},\"line-\".concat(i))),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:9,className:\"small\",children:[\"Tip: After entering \",/*#__PURE__*/_jsx(\"strong\",{children:\"Purchase Price\"}),\", press\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Enter\"}),\" to create the next row automatically.\"]})})]})]}),/*#__PURE__*/_jsx(\"datalist\",{id:\"inv-suggest-purchase\",children:pSuggest.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.name},s.name))}),/*#__PURE__*/_jsx(\"div\",{className:\"stack\",style:{marginTop:10},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:submitAllPurchases,children:\"Add Purchase\"})})]})]}),activeTab===\"item\"&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Add New Item (or select existing)\"}),/*#__PURE__*/_jsx(\"input\",{list:\"inv-suggest\",value:name,onChange:e=>setName(e.target.value),placeholder:\"e.g., TMT BARS 8MM JSW TMT\",autoComplete:\"off\"}),/*#__PURE__*/_jsx(\"datalist\",{id:\"inv-suggest\",children:suggest.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.name},s.name))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Group\"}),/*#__PURE__*/_jsx(\"input\",{value:groupName,onChange:e=>setGroupName(e.target.value),placeholder:\"e.g., TMT, MS, CHANNEL, ANGLE\",autoComplete:\"off\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"HSN Code\"}),/*#__PURE__*/_jsx(\"input\",{value:hsnCode,onChange:e=>setHsnCode(e.target.value.replace(/[^\\d]/g,\"\")),placeholder:\"e.g., 7214\",inputMode:\"numeric\",autoComplete:\"off\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stack\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:addItem,children:\"Add Item\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:async()=>setRows(await apiGetInventory()),children:\"Reload from DB\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:40},children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Item\"}),/*#__PURE__*/_jsx(\"th\",{className:\"right\",children:\"GST %\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Unit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"HSN Code\"}),/*#__PURE__*/_jsx(\"th\",{className:\"right\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"right\",children:\"Stock\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[rows.map((r,i)=>{var _ref,_r$GST,_ref2,_r$HSNCODE;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:r[\"ITEM NAME\"]||r[\"ITEM NAM\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"right\",children:Number((_ref=(_r$GST=r[\"GST %\"])!==null&&_r$GST!==void 0?_r$GST:r[\"GST\"])!==null&&_ref!==void 0?_ref:0)}),/*#__PURE__*/_jsx(\"td\",{children:r[\"UNIT\"]}),/*#__PURE__*/_jsx(\"td\",{children:(_ref2=(_r$HSNCODE=r[\"HSN CODE\"])!==null&&_r$HSNCODE!==void 0?_r$HSNCODE:r[\"HSN\"])!==null&&_ref2!==void 0?_ref2:\"\"}),/*#__PURE__*/_jsx(\"td\",{className:\"right\",children:toINR(r[\"PRICE\"])}),/*#__PURE__*/_jsx(\"td\",{className:\"right\",children:toINR(r[\"STOCK QTY\"])})]},\"\".concat(r.ID||r[\"ITEM NAME\"],\"-\").concat(i));}),rows.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:7,className:\"center small\",children:\"No items\"})})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","apiGetInventory","apiSuggestNames","apiAddItem","apiAddPurchase","jsx","_jsx","jsxs","_jsxs","toINR","n","Number","toLocaleString","maximumFractionDigits","InventoryPanel","activeTab","setActiveTab","rows","setRows","name","setName","groupName","setGroupName","hsnCode","setHsnCode","suggest","setSuggest","debRef","pDate","setPDate","Date","toISOString","slice","pBill","setPBill","pParty","setPParty","pGstNo","setPGstNo","pGst","setPGst","makeEmptyLine","item","qty","purchase_state","purchase_price","purchase_discount","gst","price","lines","setLines","pSuggest","setPSuggest","pDebRef","then","catch","prev","length","next","lastIdx","last","isLastFilled","trim","_objectSpread","clearTimeout","current","setTimeout","_unused","fetchItemSuggestions","q","_unused2","addItem","g","h","alert","fresh","e","updateLine","idx","key","val","row","numericKeys","includes","String","replace","ensureTrailingEmptyRow","onPurchasePriceDone","r","el","document","getElementById","concat","focus","removeLine","filter","_","i","resetPurchaseContext","submitAllPurchases","payloads","map","l","item_name","gross","disc","netPurchase","Math","max","gst_percent","selling_price","date","bill_no","party_name","gst_no","p","isFinite","className","children","onClick","style","marginTop","marginBottom","display","gridTemplateColumns","gap","alignItems","type","value","onChange","target","placeholder","toUpperCase","maxLength","alignSelf","width","id","list","autoComplete","onBlur","onKeyDown","title","colSpan","s","inputMode","_ref","_r$GST","_ref2","_r$HSNCODE","ID"],"sources":["C:/CA/Billing/dev/billing-pks/src/InventoryPanel.jsx"],"sourcesContent":["// src/InventoryPanel.jsx\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  apiGetInventory,\r\n  apiSuggestNames,\r\n  apiAddItem,\r\n  apiAddPurchase,\r\n} from \"./api\";\r\nimport \"./InventoryPanel.css\";\r\n\r\n// Format number as Indian currency (for display only)\r\nconst toINR = (n) =>\r\n  Number(n || 0).toLocaleString(\"en-IN\", { maximumFractionDigits: 2 });\r\n\r\nexport default function InventoryPanel() {\r\n  // ==============================\r\n  // 0. TAB STATE\r\n  // ==============================\r\n  const [activeTab, setActiveTab] = useState(\"purchase\"); // \"purchase\" | \"item\"\r\n\r\n  // ==============================\r\n  // 1. INVENTORY GRID (items table)\r\n  // ==============================\r\n  const [rows, setRows] = useState([]);\r\n\r\n  // ==============================\r\n  // 2. ADD ITEM FORM (items table)\r\n  // ==============================\r\n  const [name, setName] = useState(\"\");\r\n  const [groupName, setGroupName] = useState(\"\");\r\n  const [hsnCode, setHsnCode] = useState(\"\");\r\n  const [suggest, setSuggest] = useState([]);\r\n  const debRef = useRef();\r\n\r\n  // ==============================\r\n  // 3. PURCHASE CONTEXT\r\n  // ==============================\r\n  const [pDate, setPDate] = useState(() =>\r\n    new Date().toISOString().slice(0, 10)\r\n  );\r\n  const [pBill, setPBill] = useState(\"\");\r\n  const [pParty, setPParty] = useState(\"\"); // Party Name\r\n  const [pGstNo, setPGstNo] = useState(\"\"); // GST Number (GSTIN)\r\n    const [pGst, setPGst] = useState(\"\"); // GST Number (GSTIN)\r\n\r\n\r\n  // ==============================\r\n  // 4. PURCHASE LINES\r\n  // ==============================\r\n  const makeEmptyLine = () => ({\r\n    item: \"\",\r\n    qty: \"\",\r\n    purchase_state: \"\",\r\n    purchase_price: \"\",\r\n    purchase_discount: \"\", // ✅ NEW: discount amount\r\n    gst: pGst || \"18\", // selling GST\r\n    price: \"\", // selling price\r\n  });\r\n\r\n  const [lines, setLines] = useState([makeEmptyLine()]);\r\n  const [pSuggest, setPSuggest] = useState([]);\r\n  const pDebRef = useRef();\r\n\r\n  // ------------------------------\r\n  // Initial load of inventory from DB\r\n  // ------------------------------\r\n  useEffect(() => {\r\n    apiGetInventory()\r\n      .then(setRows)\r\n      .catch(() => {});\r\n  }, []);\r\n\r\n  // ------------------------------\r\n  // Keep new line GST in sync with context GST\r\n  // (only updates the trailing empty line's GST)\r\n  // ------------------------------\r\n  useEffect(() => {\r\n    setLines((prev) => {\r\n      if (!prev.length) return [makeEmptyLine()];\r\n      const next = [...prev];\r\n      const lastIdx = next.length - 1;\r\n      const last = next[lastIdx] || {};\r\n\r\n      const isLastFilled =\r\n        (last.item || \"\").trim() !== \"\" ||\r\n        (last.qty || \"\") !== \"\" ||\r\n        (last.purchase_state || \"\") !== \"\" ||\r\n        (last.purchase_price || \"\") !== \"\" ||\r\n        (last.purchase_discount || \"\") !== \"\" ||\r\n        (last.gst || \"\") !== \"\" ||\r\n        (last.price || \"\") !== \"\";\r\n\r\n      if (!isLastFilled) {\r\n        next[lastIdx] = { ...last, gst: pGst || \"18\" };\r\n      }\r\n      return next;\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [pGst]);\r\n\r\n  // ------------------------------\r\n  // Suggestions for \"Add Item\"\r\n  // ------------------------------\r\n  useEffect(() => {\r\n    clearTimeout(debRef.current);\r\n    debRef.current = setTimeout(async () => {\r\n      if (!name) {\r\n        setSuggest([]);\r\n        return;\r\n      }\r\n      try {\r\n        setSuggest(await apiSuggestNames(name, 25));\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }, 180);\r\n\r\n    return () => clearTimeout(debRef.current);\r\n  }, [name]);\r\n\r\n  // ------------------------------\r\n  // Suggestions for purchase lines\r\n  // ------------------------------\r\n  const fetchItemSuggestions = (q) => {\r\n    clearTimeout(pDebRef.current);\r\n    pDebRef.current = setTimeout(async () => {\r\n      if (!q) {\r\n        setPSuggest([]);\r\n        return;\r\n      }\r\n      try {\r\n        setPSuggest(await apiSuggestNames(q, 25));\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }, 180);\r\n  };\r\n\r\n  // ------------------------------\r\n  // Add new item (with Group + HSN)\r\n  // ------------------------------\r\n  const addItem = async () => {\r\n    const n = (name || \"\").trim();\r\n    const g = (groupName || \"\").trim();\r\n    const h = (hsnCode || \"\").trim();\r\n    if (!n) return alert(\"Enter item name\");\r\n    if (!g) return alert(\"Enter item group\");\r\n\r\n    try {\r\n      await apiAddItem(n, h, g);\r\n\r\n      const fresh = await apiGetInventory();\r\n      setRows(fresh);\r\n\r\n      setName(\"\");\r\n      setGroupName(\"\");\r\n      setHsnCode(\"\");\r\n      setSuggest([]);\r\n    } catch (e) {\r\n      alert(\"Error while adding item:\\n\" + e);\r\n    }\r\n  };\r\n\r\n  // ------------------------------\r\n  // Update a field within one purchase line\r\n  // ------------------------------\r\n  const updateLine = (idx, key, val) => {\r\n    setLines((prev) => {\r\n      const next = [...prev];\r\n      const row = { ...next[idx] };\r\n\r\n      // For numeric-ish fields, allow only digits and dot\r\n      const numericKeys = [\r\n        \"qty\",\r\n        \"purchase_price\",\r\n        \"purchase_discount\",\r\n        \"gst\",\r\n        \"price\",\r\n      ];\r\n      if (numericKeys.includes(key)) {\r\n        val = String(val).replace(/[^0-9.]/g, \"\");\r\n      }\r\n\r\n      row[key] = val;\r\n      next[idx] = row;\r\n      return next;\r\n    });\r\n\r\n    if (key === \"item\") fetchItemSuggestions(val);\r\n  };\r\n\r\n  // ------------------------------\r\n  // Ensure there is always a trailing empty row\r\n  // ------------------------------\r\n  const ensureTrailingEmptyRow = () => {\r\n    setLines((prev) => {\r\n      const last = prev[prev.length - 1] || {};\r\n      const isLastFilled =\r\n        (last.item || \"\").trim() !== \"\" ||\r\n        (last.qty || \"\") !== \"\" ||\r\n        (last.purchase_state || \"\") !== \"\" ||\r\n        (last.purchase_price || \"\") !== \"\" ||\r\n        (last.purchase_discount || \"\") !== \"\" ||\r\n        (last.gst || \"\") !== \"\" ||\r\n        (last.price || \"\") !== \"\";\r\n\r\n      return isLastFilled ? [...prev, makeEmptyLine()] : prev;\r\n    });\r\n  };\r\n\r\n  // ------------------------------\r\n  // Called after purchase_price is entered (blur/Enter)\r\n  // (kept same behavior as your original)\r\n  // ------------------------------\r\n  const onPurchasePriceDone = (idx) => {\r\n    const r = lines[idx] || {};\r\n    if ((r.item || \"\").trim() && Number(r.qty) > 0) {\r\n      ensureTrailingEmptyRow();\r\n      setTimeout(() => {\r\n        const el = document.getElementById(`pitem-${idx + 1}`);\r\n        el?.focus();\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  // ------------------------------\r\n  // Remove a purchase line row\r\n  // ------------------------------\r\n  const removeLine = (idx) => {\r\n    setLines((prev) => {\r\n      const next = prev.filter((_, i) => i !== idx);\r\n      return next.length ? next : [makeEmptyLine()];\r\n    });\r\n  };\r\n\r\n  // ------------------------------\r\n  // Reset purchase context\r\n  // ------------------------------\r\n  const resetPurchaseContext = () => {\r\n    setPDate(new Date().toISOString().slice(0, 10));\r\n    setPBill(\"\");\r\n    setPParty(\"\");\r\n    setPGstNo(\"\");\r\n  };\r\n\r\n  // ------------------------------\r\n  // SUBMIT ALL PURCHASE LINES\r\n  // ------------------------------\r\n  const submitAllPurchases = async () => {\r\n    if (!pBill.trim()) return alert(\"Enter Purchase Bill No.\");\r\n\r\n    const payloads = lines\r\n      .map((l) => {\r\n        const item_name = (l.item || \"\").trim();\r\n        const qty = Number(l.qty);\r\n\r\n        // discount amount: stored by reducing purchase_price (no backend change needed)\r\n        const gross = l.purchase_price === \"\" ? null : Number(l.purchase_price);\r\n        const disc =\r\n          l.purchase_discount === \"\" ? 0 : Number(l.purchase_discount);\r\n\r\n        const netPurchase =\r\n          gross === null ? null : Math.max(0, (gross || 0) - (disc || 0));\r\n\r\n        return {\r\n          item_name,\r\n          qty,\r\n\r\n          // purchase fields\r\n          purchase_state: (l.purchase_state || \"\").trim() || null,\r\n          purchase_price: netPurchase,\r\n\r\n          // selling fields\r\n          gst_percent: l.gst === \"\" ? null : Number(l.gst),\r\n          selling_price: l.price === \"\" ? null : Number(l.price),\r\n\r\n          // context fields\r\n          date: pDate,\r\n          bill_no: pBill,\r\n          party_name: (pParty || \"\").trim() || null,\r\n          gst_no: (pGstNo || \"\").trim() || null,\r\n\r\n        };\r\n      })\r\n      .filter((p) => p.item_name && Number.isFinite(p.qty) && p.qty > 0);\r\n\r\n    if (!payloads.length) return alert(\"Add at least one valid line.\");\r\n\r\n    try {\r\n      for (const p of payloads) {\r\n        // eslint-disable-next-line no-await-in-loop\r\n        await apiAddPurchase(p);\r\n      }\r\n\r\n      const fresh = await apiGetInventory();\r\n      setRows(fresh);\r\n\r\n      setLines([makeEmptyLine()]);\r\n    } catch (e) {\r\n      alert(\"Error while saving purchases:\\n\" + e);\r\n    }\r\n  };\r\n\r\n  // ==============================\r\n  // RENDER\r\n  // ==============================\r\n  return (\r\n    <div className=\"card\">\r\n      {/* === Tabs Header === */}\r\n      <div className=\"inv-tabs\">\r\n        <button\r\n          className={activeTab === \"purchase\" ? \"inv-tab active\" : \"inv-tab\"}\r\n          onClick={() => setActiveTab(\"purchase\")}\r\n        >\r\n          Add Purchase\r\n        </button>\r\n        <button\r\n          className={activeTab === \"item\" ? \"inv-tab active\" : \"inv-tab\"}\r\n          onClick={() => setActiveTab(\"item\")}\r\n        >\r\n          Add Item\r\n        </button>\r\n      </div>\r\n\r\n      {/* === TAB: Add Purchase === */}\r\n      {activeTab === \"purchase\" && (\r\n        <div style={{ marginTop: 12 }}>\r\n          <div className=\"small\" style={{ marginBottom: 6 }}>\r\n            Add Purchase (updates stock & logs in purchases table)\r\n          </div>\r\n\r\n          {/* ✅ Context row: Date + Bill No + Party Name + GST + Reset */}\r\n          <div\r\n            style={{\r\n              display: \"grid\",\r\n              gridTemplateColumns: \"1fr 1fr 1fr 140px auto\",\r\n              gap: 12,\r\n              alignItems: \"end\",\r\n              marginBottom: 8,\r\n            }}\r\n          >\r\n            <div>\r\n              <label>Date of Purchase</label>\r\n              <input\r\n                type=\"date\"\r\n                value={pDate}\r\n                onChange={(e) => setPDate(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label>Purchase Bill No.</label>\r\n              <input\r\n                value={pBill}\r\n                onChange={(e) => setPBill(e.target.value)}\r\n                placeholder=\"PB/1234\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label>Party Name</label>\r\n              <input\r\n                value={pParty}\r\n                onChange={(e) => setPParty(e.target.value)}\r\n                placeholder=\"Supplier / Party name\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label>GST No</label>\r\n              <input\r\n                value={pGstNo}\r\n                onChange={(e) => setPGstNo(e.target.value.toUpperCase())}\r\n                placeholder=\"33ABCDE1234F1Z5\"\r\n                maxLength={15}\r\n              />\r\n            </div>\r\n\r\n\r\n            <div className=\"stack\" style={{ alignSelf: \"end\" }}>\r\n              <button className=\"btn\" onClick={resetPurchaseContext}>\r\n                Reset\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Lines grid */}\r\n          <div style={{ marginTop: 6 }}>\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th style={{ width: 36 }}>#</th>\r\n                  <th>Item (from items table)</th>\r\n                  <th style={{ width: 110 }}>Quantity</th>\r\n                  <th style={{ width: 130 }}>Purchase State</th>\r\n                  <th style={{ width: 140 }}>Purchase Price</th>\r\n                  <th style={{ width: 120 }}>Discount</th>\r\n                  <th style={{ width: 110 }}>GST %</th>\r\n                  <th style={{ width: 140 }}>Selling Price</th>\r\n                  <th style={{ width: 60 }}></th>\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                {lines.map((r, i) => (\r\n                  <tr key={`line-${i}`}>\r\n                    <td>{i + 1}</td>\r\n\r\n                    <td>\r\n                      <input\r\n                        id={`pitem-${i}`}\r\n                        list=\"inv-suggest-purchase\"\r\n                        value={r.item}\r\n                        onChange={(e) => updateLine(i, \"item\", e.target.value)}\r\n                        placeholder=\"Start typing to search…\"\r\n                        autoComplete=\"off\"\r\n                      />\r\n                    </td>\r\n\r\n                    <td>\r\n                      <input\r\n                        value={r.qty}\r\n                        onChange={(e) => updateLine(i, \"qty\", e.target.value)}\r\n                        placeholder=\"0\"\r\n                      />\r\n                    </td>\r\n\r\n                    <td>\r\n                      <input\r\n                        value={r.purchase_state}\r\n                        onChange={(e) =>\r\n                          updateLine(\r\n                            i,\r\n                            \"purchase_state\",\r\n                            e.target.value.toUpperCase()\r\n                          )\r\n                        }\r\n                        placeholder=\"00\"\r\n                      />\r\n                    </td>\r\n\r\n                    <td>\r\n                      <input\r\n                        value={r.purchase_price}\r\n                        onChange={(e) =>\r\n                          updateLine(i, \"purchase_price\", e.target.value)\r\n                        }\r\n                        placeholder=\"0.00\"\r\n                        onBlur={() => onPurchasePriceDone(i)}\r\n                        onKeyDown={(e) => {\r\n                          if (e.key === \"Enter\") onPurchasePriceDone(i);\r\n                        }}\r\n                      />\r\n                    </td>\r\n\r\n                    <td>\r\n                      <input\r\n                        value={r.purchase_discount}\r\n                        onChange={(e) =>\r\n                          updateLine(i, \"purchase_discount\", e.target.value)\r\n                        }\r\n                        placeholder=\"0.00\"\r\n                      />\r\n                    </td>\r\n\r\n                    <td>\r\n                      <input\r\n                        value={r.gst}\r\n                        onChange={(e) => updateLine(i, \"gst\", e.target.value)}\r\n                        placeholder=\"18\"\r\n                      />\r\n                    </td>\r\n\r\n                    <td>\r\n                      <input\r\n                        value={r.price}\r\n                        onChange={(e) => updateLine(i, \"price\", e.target.value)}\r\n                        placeholder=\"0.00\"\r\n                      />\r\n                    </td>\r\n\r\n                    <td className=\"center\">\r\n                      <button\r\n                        className=\"btn\"\r\n                        onClick={() => removeLine(i)}\r\n                        title=\"Remove row\"\r\n                      >\r\n                        ✕\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n\r\n                <tr>\r\n                  <td colSpan={9} className=\"small\">\r\n                    Tip: After entering <strong>Purchase Price</strong>, press{\" \"}\r\n                    <strong>Enter</strong> to create the next row automatically.\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n\r\n            {/* Shared datalist for purchase items */}\r\n            <datalist id=\"inv-suggest-purchase\">\r\n              {pSuggest.map((s) => (\r\n                <option key={s.name} value={s.name} />\r\n              ))}\r\n            </datalist>\r\n\r\n            <div className=\"stack\" style={{ marginTop: 10 }}>\r\n              <button className=\"btn primary\" onClick={submitAllPurchases}>\r\n                Add Purchase\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* === TAB: Add Item === */}\r\n      {activeTab === \"item\" && (\r\n        <div style={{ marginTop: 12 }}>\r\n          <div className=\"row-3\">\r\n            <div>\r\n              <label>Add New Item (or select existing)</label>\r\n              <input\r\n                list=\"inv-suggest\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                placeholder=\"e.g., TMT BARS 8MM JSW TMT\"\r\n                autoComplete=\"off\"\r\n              />\r\n              <datalist id=\"inv-suggest\">\r\n                {suggest.map((s) => (\r\n                  <option key={s.name} value={s.name} />\r\n                ))}\r\n              </datalist>\r\n            </div>\r\n\r\n            <div>\r\n              <label>Group</label>\r\n              <input\r\n                value={groupName}\r\n                onChange={(e) => setGroupName(e.target.value)}\r\n                placeholder=\"e.g., TMT, MS, CHANNEL, ANGLE\"\r\n                autoComplete=\"off\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label>HSN Code</label>\r\n              <input\r\n                value={hsnCode}\r\n                onChange={(e) => setHsnCode(e.target.value.replace(/[^\\d]/g, \"\"))}\r\n                placeholder=\"e.g., 7214\"\r\n                inputMode=\"numeric\"\r\n                autoComplete=\"off\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"stack\">\r\n              <button className=\"btn primary\" onClick={addItem}>\r\n                Add Item\r\n              </button>\r\n              <button\r\n                className=\"btn\"\r\n                onClick={async () => setRows(await apiGetInventory())}\r\n              >\r\n                Reload from DB\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* === Items Grid (current inventory) === */}\r\n      <div style={{ marginTop: 12 }}>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ width: 40 }}>#</th>\r\n              <th>Item</th>\r\n              <th className=\"right\">GST %</th>\r\n              <th>Unit</th>\r\n              <th>HSN Code</th>\r\n              <th className=\"right\">Price</th>\r\n              <th className=\"right\">Stock</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map((r, i) => (\r\n              <tr key={`${r.ID || r[\"ITEM NAME\"]}-${i}`}>\r\n                <td>{i + 1}</td>\r\n                <td>{r[\"ITEM NAME\"] || r[\"ITEM NAM\"]}</td>\r\n                <td className=\"right\">{Number(r[\"GST %\"] ?? r[\"GST\"] ?? 0)}</td>\r\n                <td>{r[\"UNIT\"]}</td>\r\n                <td>{r[\"HSN CODE\"] ?? r[\"HSN\"] ?? \"\"}</td>\r\n                <td className=\"right\">{toINR(r[\"PRICE\"])}</td>\r\n                <td className=\"right\">{toINR(r[\"STOCK QTY\"])}</td>\r\n              </tr>\r\n            ))}\r\n            {rows.length === 0 && (\r\n              <tr>\r\n                <td colSpan={7} className=\"center small\">\r\n                  No items\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}